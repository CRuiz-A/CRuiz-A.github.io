<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turnstile Test</title>
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>
    <h1>Cloudflare Turnstile Test</h1>
    <form id="test-form">
        <div class="cf-turnstile" data-sitekey="REEMPLAZA_CON_TU_NUEVA_CLAVE_DE_SITIO" data-callback="onTurnstileSuccess"></div>
        <button type="submit" disabled>Submit</button>
    </form>

    <script>
        function onTurnstileSuccess(token) {
            console.log("Turnstile success:", token);
            document.querySelector('#test-form button').disabled = false;

            fetch('https://tu-dominio-de-vercel.vercel.app/api/turnstile/validate', { // <-- Â¡IMPORTANTE! CAMBIA ESTA URL
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ token: token }),
            })
            .then(response => response.json())
            .then(data => {
                console.log("Validation response:", data);
                if (data.success) {
                    alert("Validation successful!");
                } else {
                    alert("Validation failed: " + JSON.stringify(data['error-codes']));
                }
            })
            .catch(error => {
                console.error("Error validating token:", error);
                alert("An error occurred during validation.");
            });
        }
    </script>
</body>
</html>
