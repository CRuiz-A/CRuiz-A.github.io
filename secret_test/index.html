<!DOCTYPE html> <html lang=es > <meta charset=UTF-8  /> <meta name=viewport  content="width=device-width, initial-scale=1.0" /> <title>Prueba Secreto con Turnstile</title> <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script> <script src="/assets/scripts/turnstile-config.js"></script> <script src="/assets/scripts/turnstile.js"></script> <style> body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial; max-width: 720px; margin: 40px auto; padding: 0 16px; } .card { border: 1px solid #ddd; border-radius: 10px; padding: 16px; margin-bottom: 20px; background: #fff; } label { display: block; font-weight: 600; margin-bottom: 6px; } input[type="text"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; } button { padding: 10px 16px; border: 0; background: #0d6efd; color: #fff; border-radius: 6px; cursor: pointer; } button:disabled { background: #6c757d; cursor: not-allowed; } pre { white-space: pre-wrap; background: #f7f7f7; padding: 10px; border-radius: 6px; } </style> <script> async function setSecret() { const input = document.getElementById('secretInput'); const out = document.getElementById('setOut'); out.textContent = 'Enviando...'; try { if (window.turnstileHandler) { await window.turnstileHandler.ensureCaptchaPass(); } const res = await fetchWithCaptcha(`${TURNSTILE_CONFIG.apiBase}/secret`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ message: input.value }) }); const json = await res.json(); out.textContent = `Status: ${res.status}\n${JSON.stringify(json)}`; } catch (e) { out.textContent = 'Error: ' + e.message; } } async function getSecret() { const out = document.getElementById('getOut'); out.textContent = 'Leyendo...'; try { if (window.turnstileHandler) { await window.turnstileHandler.exchangeForCaptchaPass().catch(()=>{}); } const res = await fetchWithCaptcha(`${TURNSTILE_CONFIG.apiBase}/secret`); const json = await res.json(); out.textContent = `Status: ${res.status}\n${JSON.stringify(json)}`; } catch (e) { out.textContent = 'Error: ' + e.message; } } </script> <h1>Prueba Secreto</h1> <div class=card > <h3>1) Completa el CAPTCHA</h3> <div class=cf-turnstile  data-sitekey=0x4AAAAAABnyQIvR42qq5_Ed ></div> </div> <div class=card > <h3>2) Guardar secreto (protegido)</h3> <label for=secretInput >Mensaje secreto</label> <input id=secretInput  type=text  placeholder="Escribe tu secreto" /> <div style="margin-top:10px;"> <button onclick="setSecret()">Guardar</button> </div> <pre id=setOut ></pre>
  </div>

  <div class=card >
    <h3>3) Leer secreto (protegido)</h3>
    <button onclick="getSecret()">Leer</button>
    <pre id=getOut ></pre>
  </div>